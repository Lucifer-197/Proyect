<!-- Título de usuarios existentes -->
<div class="d-flex justify-content-start mb-3" style="max-width: 900px; margin: 0 auto;">
  <h4 class="mb-0" style="color:#495057">Usuarios existentes</h4>
</div>

<!-- Tarjeta de la tabla de usuarios -->
<div class="card mx-auto shadow mb-5" style="max-width: 900px; border-radius: 0;">
  <div class="card-body p-0">
    <table class="table mb-0">
      <thead>
        <tr class="text-start fs-6">
          
          <th class="fw-semibold" style="width: 35%; height: 60px; vertical-align: middle; color:white; background-color:rgb(37, 37, 119);">Usuario</th>
          <th class="fw-semibold" style="width: 35%; height: 60px; vertical-align: middle; color:white; background-color:rgb(37, 37, 119);">Rol</th>
          <th class="fw-semibold text-center" style="width: 30%; height: 60px; vertical-align: middle;color:white; background-color:rgb(37, 37, 119);">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of usuarios">
          <ng-container *ngIf="editingUsuario?.idUsuarios === user.idUsuarios; else viewUser">
            <td style="height: 90px; vertical-align: middle;">
              <input [(ngModel)]="editingUsuario.nombreUsuario" class="form-control form-control-sm" />
            </td>
            <td style="height: 90px; vertical-align: middle;">
              <select [(ngModel)]="editingUsuario.idRol" class="form-select form-select-sm">
                <option *ngFor="let rol of rolesFiltrados" [ngValue]="rol.idRol">{{ rol.nombreRol }}</option>
              </select>
            </td>
            <td class="text-center" style="height: 90px; vertical-align: middle;">
              <div class="d-inline-flex gap-2">
                <button (click)="updateUsuario()" class="btn btn-success btn-sm rounded-circle" style="width: 34px; height: 34px;">
                  <i class="fas fa-save"></i>
                </button>
                <button (click)="cancelEditUsuario()" class="btn btn-danger btn-sm rounded-circle" style="width: 34px; height: 34px;">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </td>
          </ng-container>

          <ng-template #viewUser>
            <td class="text-muted" style="height: 90px; vertical-align: middle;">{{ user.nombreUsuario }}</td>
            <td class="text-muted" style="height: 90px; vertical-align: middle;">{{ user.rolesModel?.nombreRol || 'Sin rol' }}</td>
            <td class="text-center" style="height: 90px; vertical-align: middle;">
              <div class="d-inline-flex gap-2">
                <button (click)="editUsuario(user)" class="btn btn-success btn-sm rounded-circle" style="width: 34px; height: 34px;background-color:rgb(37, 37, 119)">
                  <i class="fas fa-pencil-alt"></i>
                </button>
                <button (click)="deleteUsuario(user.idUsuarios)" class="btn btn-danger btn-sm rounded-circle" style="width: 34px; height: 34px;">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </td>
          </ng-template>
        </tr>
      </tbody>
    </table>
  </div>
</div>



<br>
  <!-- Crear Usuario -->
  <!-- Título del formulario alineado -->
<div class="d-flex justify-content-start mb-3" style="max-width: 900px; margin: 0 auto;">
  <h4 class="mb-0" style="color:#495057">Crear Usuario</h4>
</div>

<!-- Formulario con estilo de tabla -->
<div class="card shadow mb-5" style="max-width: 900px; margin: 0 auto; border-radius: 0;">
  <div class="card-body p-0">
    <form #usuarioForm="ngForm" (ngSubmit)="crearUsuario(usuarioForm)">
      <table class="table mb-0">
        <thead>
          <tr>
            <th class="fw-semibold" style="width: 30%; height: 60px; vertical-align: middle;color:white; background-color:rgb(37, 37, 119);">
              Nombre de usuario
            </th>
            <th class="fw-semibold" style="width: 30%; height: 60px; vertical-align: middle; color:white; background-color:rgb(37, 37, 119);">
              Clave
            </th>
            <th class="fw-semibold" style="width: 30%; height: 60px; vertical-align: middle; color:white; background-color:rgb(37, 37, 119);">
              Rol
            </th>
            <th class="fw-semibold text-start" style="width: 10%; height: 60px; vertical-align: middle; color:white; background-color:rgb(37, 37, 119);">
              Acción
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="height: 90px; vertical-align: middle;">
              <input
                [(ngModel)]="nuevoUsuario.nombreUsuario"
                name="nombreUsuario"
                class="form-control form-control-sm"
                style="width: 100%;"
                required
              />
            </td>
            <td style="height: 90px; vertical-align: middle;">
              <input
                [(ngModel)]="nuevoUsuario.clave"
                name="clave"
                type="password"
                class="form-control form-control-sm"
                style="width: 100%;"
                required
              />
            </td>
            <td style="height: 90px; vertical-align: middle;">
              <select
                [(ngModel)]="nuevoUsuario.idRol"
                name="idRol"
                class="form-select form-select-sm"
                style="width: 100%;"
                required
              >
                <option *ngFor="let rol of rolesFiltrados" [ngValue]="rol.idRol">{{ rol.nombreRol }}</option>
              </select>
            </td>
            <td class="text-start" style="vertical-align: middle;">
              <button
                type="submit"
                class="px-4 btn btn-success"
            
              >
                Crear
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </form>
  </div>
</div>
